---
layout: post
title: 'Converting a Commodore 128 BASIC Program to the MEGA65'
date: 2022-02-26
author: 'Steven B. Combs, Ph.D.'
email: 'retrocombs@icloud.com'
comments: yes
permalink: c128-basic-to-mega65
category: mega65
---

In a past live stream, not currently available to view, I tried to convert a BASIC program from the Commodore 128 Programmer's Reference Guide to use on the MEGA65. What I thought would be a line-by-line conversion caught me off guard, as I found there were significant differences between Commodore BASIC 7 (CBM 128) and Commodore BASIC 10 (CBM 65 / MEGA65). Folks on the live stream tried to help, but we quickly found that trying to convert this program while distracted was not a productive environment. In order to make the conversion, I needed to spend time in the MEGA65 Book reviewing changes from BASIC 7 to 10. 

There are many command changes between these versions of BASIC when addressing graphic screens; a feature of the Submarine Tracking System program. I would have been able to convert the program without this review and trial and error. After about an hour, I had the conversion complete along with enhancements. This blog post and companion video explain the differences between the two programs. 

----

**Table of Contents**



----

## Support the Blog and Channel

You can now support me via Buy Me A Coffee page with a one-time activity or become a full member via my fun Commodore inspired membership levels. When you support the channel you get additional content and fun extras. Check out [the membership levels](https://www.buymeacoffee.com/retroCombs) to learn more.

Thank you to these members for supporting me at [the C128 level](https://www.buymeacoffee.com/retroCombs/membership); making them retroCombs producers:

- [Mislav Krle≈æa](https://twitter.com/KrlezaMislav)
- [Jamie's Hack Shack](https://www.youtube.com/channel/UC-otrG2r_FluXkR8lUYWdPg)
- Boba Fett
- The Lovely Accountant

## Companion YouTube Video

Title: _Title_

In the video below, I convert a Submarine Tracking program for the Commodore 128 to the MEGA65.

<div style="position:relative;padding-top:56.25%;"><p><iframe src="link" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></p></div>

## Video Errata

None as of 2022-02-26.

## Links Mentioned in this Episode

Below are the links I mention in this blog post and companion video. All Amazon links are affiliate links. I‚Äôd like to thank everyone for your support of the blog and the YouTube channel by starting your purchases here!

1. [C128 Programmer's Reference Manual](/c128/c128-programmers-reference-guide.pdf)
2. [MEGA65 Book](https://files.mega65.org?id=d668168c-1fef-4560-a530-77e9e237536d)

## Submarine Tracking Program

After a recent purchase to replace my C128 from the 1980s, I was perusing a PDF version of the [C128 Programmer's Reference Manual](/c128/c128-programmers-reference-guide.pdf) for interesting tips and tricks for an upcoming project; however, there was a BASIC program on page 116 that drew my eye, the **Submarine Tracking System**. There was no image of the program's output, but the 23 lines of code intimated a cool graphics display through its use of circles and sound.

I fired up the C128 [VICE emulator](https://vice-emu.sourceforge.io) on my Mac and typed in the program. Yes, I could have used the technique from my [Transfer BASIC Programs in Print to Physical Commodore Computers](https://www.stevencombs.com/print-to-commodore) post and video to speed up the process, but it was 23 lines long and since my desire was to convert this to a MEGA65 program, typing it would allow me to process each line and how it worked.

I was correct, the program was a fun 23 lines of code.

## Commodore 128 Version

```realbasic
10 REM SUBMARINE TRACKING SYSTEM (C128)
20 COLOR 0,1:COLOR 4,1:COLOR 1,2:GRAPHIC 1,1 
30 BOX 1,0,0,319,199
40 CHAR 1,7,24,"SUBMARINE TRACKING SYSTEM"
50 COLOR 1,3
60 XR=0:YR=0
70 DO
80 CIRCLE 1,160,100,XR,YR,0,360,0,2
90 XR=XR+10:YR=YR+10
100 LOOP UNTIL XR=90
110 DO
120 XR=0:YR=0
130 DO
140 CIRCLE 0,160,100,XR,YR,0,360,0,2
150 COLOR 1,2
160 DRAW 1,160,100+XR:DRAW 0,160,100+XR
170 COLOR 1,3
180 SOUND 1,16000,15
190 CIRCLE 1,160,100,XR,YR,0,360,0,2
200 XR=XR+10:YR=YR+10
210 LOOP UNTIL XR=90
220 LOOP
```
**üíæ Download:** [`C128 SUB TRACK`](/c128/sub-track-sys.txt)

Below is an image of the output, but entering and running on the C128 is the best way to experience the program.

![C128 Submarine Tracking System](/c128/sub-track-sys.png)

> **TIP:** Load the C128 [VICE emulator](https://vice-emu.sourceforge.io), download the `.txt` file above, copy the contents, and paste into the VICE emulator. Type `RUN` and start tracking subs! 

## MEGA65 Version

```realbasic
10 REM SUBMARINE TRACKING SYSTEM (MEGA65)
20 SPEED 1:GRAPHIC CLR:SCREEN 320,200,8
30 LINE 50,194,0,194,0,0,319,0,319,194,269,194
40 CHAR 7,190,1,1,2,"SUBMARINE TRACKING SYSTEM",$29000
50 PEN 2
60 LET XR=10
70 DO
80 PEN 2:CIRCLE 160,95,XR
90 LET XR=XR+10
100 LOOP UNTIL XR=90
110 LET XR=10
120 DO
130 LET XR=10
140 DO
150 PEN 1:CIRCLE 160,95-XR,2,1
160 PEN 0:CIRCLE 160,95-XR,2,1
170 SOUND 1,10000,15
180 PEN 0:CIRCLE 160,95,XR
190 PEN 2:CIRCLE 160,95,XR
200 XR=XR+10
210 LOOP UNTIL XR=90
220 LOOP
```
**üíæ Download:** `MEGA65 SUB TRACK`

## Comparing Lines



## Additional Thoughts

1.

## Join the Fun

Don't miss the retro-computing fun. <font color="red">SUBSCRIBE</font> to my [YouTube channel](https://www.youtube.com/stevencombs) and check out [my other posts](https://www.stevencombs.com).

Help make this content better! Leave your comments, corrections, additions, and thoughts in the comments below. You can email me at [retrocombs@icloud.com](mailto:retrocombs@icloud.com). Thanks for reading and if you are inclined, please let others know about the blog using the hashtag #retroCombs.

üïπÔ∏è retroCombs, OUT!
